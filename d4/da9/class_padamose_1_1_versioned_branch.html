<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Padamose: Padamose::VersionedBranch Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Padamose
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d4/da9/class_padamose_1_1_versioned_branch.html','../../');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="../../d0/d85/class_padamose_1_1_versioned_branch-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Padamose::VersionedBranch Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html" title="VersionedBranch is an internal data structure used to store a contiguous block of versioned values...">VersionedBranch</a> is an internal data structure used to store a contiguous block of versioned values.  
 <a href="../../d4/da9/class_padamose_1_1_versioned_branch.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../dc/d7d/_versioned_branch_8h_source.html">VersionedBranch.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Padamose::VersionedBranch:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d44/class_padamose_1_1_versioned_branch__inherit__graph.png" border="0" usemap="#_padamose_1_1_versioned_branch_inherit__map" alt="Inheritance graph"/></div>
<map name="_padamose_1_1_versioned_branch_inherit__map" id="_padamose_1_1_versioned_branch_inherit__map">
<area shape="rect" id="node3" href="../../d6/d41/class_padamose_1_1_abstract_versioned_branch_client.html" title="Base class for VersionedBranch clients. Branch client types include branches (parent&#45;to&#45;child) as wel..." alt="" coords="5,68,206,107"/>
</map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a398735af7f249890be82ddb4b8d71560"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#a398735af7f249890be82ddb4b8d71560">VersionedBranch</a> ()</td></tr>
<tr class="separator:a398735af7f249890be82ddb4b8d71560"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8223595abbec33103857f51e211f4014"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#a8223595abbec33103857f51e211f4014">~VersionedBranch</a> ()</td></tr>
<tr class="memdesc:a8223595abbec33103857f51e211f4014"><td class="mdescLeft">&#160;</td><td class="mdescRight">Asserts that no direct references remain.  <a href="#a8223595abbec33103857f51e211f4014">More...</a><br /></td></tr>
<tr class="separator:a8223595abbec33103857f51e211f4014"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ad5f088510f8e8f3472326a08b1045552"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d41/class_padamose_1_1_abstract_versioned_branch_client.html#ad5f088510f8e8f3472326a08b1045552">canJoin</a> () const</td></tr>
<tr class="memdesc:ad5f088510f8e8f3472326a08b1045552"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if client supports the join operation.  <a href="#ad5f088510f8e8f3472326a08b1045552">More...</a><br /></td></tr>
<tr class="separator:ad5f088510f8e8f3472326a08b1045552"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27a351eedec84aaa51ea41498116acc9"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d41/class_padamose_1_1_abstract_versioned_branch_client.html#a27a351eedec84aaa51ea41498116acc9">getJoinScore</a> () const</td></tr>
<tr class="memdesc:a27a351eedec84aaa51ea41498116acc9"><td class="mdescLeft">&#160;</td><td class="mdescRight">If a client supports the join operation, returns the score to use to select a winner from two valid candidates.  <a href="#a27a351eedec84aaa51ea41498116acc9">More...</a><br /></td></tr>
<tr class="separator:a27a351eedec84aaa51ea41498116acc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab11d914b80c025e428d2e3e5da672747"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d41/class_padamose_1_1_abstract_versioned_branch_client.html#ab11d914b80c025e428d2e3e5da672747">getVersionDependency</a> () const</td></tr>
<tr class="memdesc:ab11d914b80c025e428d2e3e5da672747"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the version below which all verions are depended on (to not change) by client. If any version below the dependent verion is changed, the branch must be forked and the change applied to the new branch.  <a href="#ab11d914b80c025e428d2e3e5da672747">More...</a><br /></td></tr>
<tr class="separator:ab11d914b80c025e428d2e3e5da672747"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31d251e088e9918a2a6d344559ee539e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d41/class_padamose_1_1_abstract_versioned_branch_client.html#a31d251e088e9918a2a6d344559ee539e">joinBranch</a> (<a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html">VersionedBranch</a> &amp;branch)</td></tr>
<tr class="memdesc:a31d251e088e9918a2a6d344559ee539e"><td class="mdescLeft">&#160;</td><td class="mdescRight">If a client supports the join operation (i.e. client is a branch), appends the contents of the client to the given branch.  <a href="#a31d251e088e9918a2a6d344559ee539e">More...</a><br /></td></tr>
<tr class="separator:a31d251e088e9918a2a6d344559ee539e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a189402403b5278feb24366c8edf499ed"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d41/class_padamose_1_1_abstract_versioned_branch_client.html#a189402403b5278feb24366c8edf499ed">preventJoin</a> () const</td></tr>
<tr class="memdesc:a189402403b5278feb24366c8edf499ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used by client to prevent a join from happening. Only considered is <a class="el" href="../../d6/d41/class_padamose_1_1_abstract_versioned_branch_client.html#ad5f088510f8e8f3472326a08b1045552" title="Returns true if client supports the join operation. ">canJoin()</a> returns true.  <a href="#a189402403b5278feb24366c8edf499ed">More...</a><br /></td></tr>
<tr class="separator:a189402403b5278feb24366c8edf499ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a624e5cb9ba0bb6e4b0b1fcca8907a14f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d41/class_padamose_1_1_abstract_versioned_branch_client.html#a624e5cb9ba0bb6e4b0b1fcca8907a14f">setBranch</a> (shared_ptr&lt; <a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html">VersionedBranch</a> &gt; branch)</td></tr>
<tr class="memdesc:a624e5cb9ba0bb6e4b0b1fcca8907a14f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove the client from the existing branch (if any) and add it to the new branch without changing the client's version.  <a href="#a624e5cb9ba0bb6e4b0b1fcca8907a14f">More...</a><br /></td></tr>
<tr class="separator:a624e5cb9ba0bb6e4b0b1fcca8907a14f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af10c293db1a78375feeb4029ec8d35fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d41/class_padamose_1_1_abstract_versioned_branch_client.html#af10c293db1a78375feeb4029ec8d35fb">setBranch</a> (shared_ptr&lt; <a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html">VersionedBranch</a> &gt; branch, size_t version)</td></tr>
<tr class="memdesc:af10c293db1a78375feeb4029ec8d35fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove the client from the existing branch (if any) and add it to the new branch. Update the client's version.  <a href="#af10c293db1a78375feeb4029ec8d35fb">More...</a><br /></td></tr>
<tr class="separator:af10c293db1a78375feeb4029ec8d35fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a8420a0e79a7c70d074d4040bc9f182b2"><td class="memItemLeft" align="right" valign="top">shared_ptr&lt; <a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html">VersionedBranch</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d41/class_padamose_1_1_abstract_versioned_branch_client.html#a8420a0e79a7c70d074d4040bc9f182b2">mSourceBranch</a></td></tr>
<tr class="memdesc:a8420a0e79a7c70d074d4040bc9f182b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">The source (or parent) branch for this client. May be NULL.  <a href="#a8420a0e79a7c70d074d4040bc9f182b2">More...</a><br /></td></tr>
<tr class="separator:a8420a0e79a7c70d074d4040bc9f182b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a204e62db33566625f9bb2bf3abf9a77b"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d41/class_padamose_1_1_abstract_versioned_branch_client.html#a204e62db33566625f9bb2bf3abf9a77b">mVersion</a></td></tr>
<tr class="memdesc:a204e62db33566625f9bb2bf3abf9a77b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current (or base) version for this client.  <a href="#a204e62db33566625f9bb2bf3abf9a77b">More...</a><br /></td></tr>
<tr class="separator:a204e62db33566625f9bb2bf3abf9a77b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:ab4c20029ae5f48d87bf41c1e49e2cebc"><td class="memItemLeft" align="right" valign="top">typedef set&lt; string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#ab4c20029ae5f48d87bf41c1e49e2cebc">Layer</a></td></tr>
<tr class="separator:ab4c20029ae5f48d87bf41c1e49e2cebc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ab077cdebc43f1a0754986cc1711d045b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#ab077cdebc43f1a0754986cc1711d045b">AbstractVersionedStoreClient_canJoin</a> () const override</td></tr>
<tr class="memdesc:ab077cdebc43f1a0754986cc1711d045b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implementation of virtual method. Always returns true.  <a href="#ab077cdebc43f1a0754986cc1711d045b">More...</a><br /></td></tr>
<tr class="separator:ab077cdebc43f1a0754986cc1711d045b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8e10c5bac13b704dce04fef4b1cb971"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#ae8e10c5bac13b704dce04fef4b1cb971">AbstractVersionedStoreClient_getJoinScore</a> () const override</td></tr>
<tr class="memdesc:ae8e10c5bac13b704dce04fef4b1cb971"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implementation of virtual method. Returns the top version.  <a href="#ae8e10c5bac13b704dce04fef4b1cb971">More...</a><br /></td></tr>
<tr class="separator:ae8e10c5bac13b704dce04fef4b1cb971"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6248cb0bfc0a9320893d0cfcd23ae762"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#a6248cb0bfc0a9320893d0cfcd23ae762">AbstractVersionedStoreClient_getVersionDependency</a> () const override</td></tr>
<tr class="memdesc:a6248cb0bfc0a9320893d0cfcd23ae762"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implementation of virtual method. Returns the base version; the branch depends on all versions less than the base version.  <a href="#a6248cb0bfc0a9320893d0cfcd23ae762">More...</a><br /></td></tr>
<tr class="separator:a6248cb0bfc0a9320893d0cfcd23ae762"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab19ff3c4c3ebae051ff414c1f9cff4b3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#ab19ff3c4c3ebae051ff414c1f9cff4b3">AbstractVersionedStoreClient_joinBranch</a> (<a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html">VersionedBranch</a> &amp;branch) override</td></tr>
<tr class="memdesc:ab19ff3c4c3ebae051ff414c1f9cff4b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implementation of virtual method. Appends the contents of the branch onto the given branch and transfers all clients and children to the given branch.  <a href="#ab19ff3c4c3ebae051ff414c1f9cff4b3">More...</a><br /></td></tr>
<tr class="separator:ab19ff3c4c3ebae051ff414c1f9cff4b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaafb552decf0e49290e6f1f69e1a48b7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#aaafb552decf0e49290e6f1f69e1a48b7">AbstractVersionedStoreClient_preventJoin</a> () const override</td></tr>
<tr class="memdesc:aaafb552decf0e49290e6f1f69e1a48b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implementation of virtual method. Prevents a join optimization from happening if the branch has any direct references.  <a href="#aaafb552decf0e49290e6f1f69e1a48b7">More...</a><br /></td></tr>
<tr class="separator:aaafb552decf0e49290e6f1f69e1a48b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a384adf6744324b6780aa5b0900c0c914"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#a384adf6744324b6780aa5b0900c0c914">countDependencies</a> () const</td></tr>
<tr class="memdesc:a384adf6744324b6780aa5b0900c0c914"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the total number of dependencies (i.e. clients).  <a href="#a384adf6744324b6780aa5b0900c0c914">More...</a><br /></td></tr>
<tr class="separator:a384adf6744324b6780aa5b0900c0c914"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5961816289c0830f71645ceeaa2e9d4d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#a5961816289c0830f71645ceeaa2e9d4d">eraseClient</a> (<a class="el" href="../../d6/d41/class_padamose_1_1_abstract_versioned_branch_client.html">AbstractVersionedBranchClient</a> &amp;client)</td></tr>
<tr class="memdesc:a5961816289c0830f71645ceeaa2e9d4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the client from the branch's client set.  <a href="#a5961816289c0830f71645ceeaa2e9d4d">More...</a><br /></td></tr>
<tr class="separator:a5961816289c0830f71645ceeaa2e9d4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64565cce4e0166aa8d97e5b17bc1a0d4"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#a64565cce4e0166aa8d97e5b17bc1a0d4">findImmutableTop</a> (const <a class="el" href="../../d6/d41/class_padamose_1_1_abstract_versioned_branch_client.html">AbstractVersionedBranchClient</a> *ignore=NULL) const</td></tr>
<tr class="memdesc:a64565cce4e0166aa8d97e5b17bc1a0d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterates through all clients to find the top immutable version in the branch. All versions less than the top must not be changed.  <a href="#a64565cce4e0166aa8d97e5b17bc1a0d4">More...</a><br /></td></tr>
<tr class="separator:a64565cce4e0166aa8d97e5b17bc1a0d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65d2ec2dac4dfe2870c66d52579807d5"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="../../d2/d67/class_padamose_1_1_abstract_value_stack.html">AbstractValueStack</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#a65d2ec2dac4dfe2870c66d52579807d5">findValueStack</a> (string key) const</td></tr>
<tr class="memdesc:a65d2ec2dac4dfe2870c66d52579807d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the <a class="el" href="../../dd/d4c/class_padamose_1_1_value_stack.html" title="Templated implementation of AbstractValueStack. ">ValueStack</a> corresponding to the given key, if it exists in the branch. Does not recurse: searches only the local branch.  <a href="#a65d2ec2dac4dfe2870c66d52579807d5">More...</a><br /></td></tr>
<tr class="separator:a65d2ec2dac4dfe2870c66d52579807d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aefcfa3a84d21e614228b1c390041c759"><td class="memItemLeft" align="right" valign="top">shared_ptr&lt; <a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html">VersionedBranch</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#aefcfa3a84d21e614228b1c390041c759">fork</a> (size_t baseVersion)</td></tr>
<tr class="memdesc:aefcfa3a84d21e614228b1c390041c759"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a new branch using the given branch as a parent. If the base version is less than the top of the parent branch, then the corresponding layer is copied.  <a href="#aefcfa3a84d21e614228b1c390041c759">More...</a><br /></td></tr>
<tr class="separator:aefcfa3a84d21e614228b1c390041c759"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93a3e84ba26aa417153c7a32c4612eb2"><td class="memItemLeft" align="right" valign="top">const void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#a93a3e84ba26aa417153c7a32c4612eb2">getRaw</a> (size_t version, string key, size_t typeID) const</td></tr>
<tr class="separator:a93a3e84ba26aa417153c7a32c4612eb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcacd0f30a882f72656758eb91f17e85"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#afcacd0f30a882f72656758eb91f17e85">getTopVersion</a> () const</td></tr>
<tr class="memdesc:afcacd0f30a882f72656758eb91f17e85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the top of the version stack or 0 if the stack is empty.  <a href="#afcacd0f30a882f72656758eb91f17e85">More...</a><br /></td></tr>
<tr class="separator:afcacd0f30a882f72656758eb91f17e85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4418f27da57b9c66732b6cbef4984357"><td class="memTemplParams" colspan="2">template&lt;typename TYPE &gt; </td></tr>
<tr class="memitem:a4418f27da57b9c66732b6cbef4984357"><td class="memTemplItemLeft" align="right" valign="top">const TYPE *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#a4418f27da57b9c66732b6cbef4984357">getValueOrNil</a> (size_t version, string key) const</td></tr>
<tr class="memdesc:a4418f27da57b9c66732b6cbef4984357"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recursively searches the branch to find the value for the key. The most recent version equal to or earlier will be returned.  <a href="#a4418f27da57b9c66732b6cbef4984357">More...</a><br /></td></tr>
<tr class="separator:a4418f27da57b9c66732b6cbef4984357"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6977bbc67cacd6fe97d0a49e219b23d5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#a6977bbc67cacd6fe97d0a49e219b23d5">insertClient</a> (<a class="el" href="../../d6/d41/class_padamose_1_1_abstract_versioned_branch_client.html">AbstractVersionedBranchClient</a> &amp;client)</td></tr>
<tr class="memdesc:a6977bbc67cacd6fe97d0a49e219b23d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inserts a client into the branch's client set. Inserting a client adds a dependency on a specific layer in the branch.  <a href="#a6977bbc67cacd6fe97d0a49e219b23d5">More...</a><br /></td></tr>
<tr class="separator:a6977bbc67cacd6fe97d0a49e219b23d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ec0e705e6208dc4ac21cbd15fd756ff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#a5ec0e705e6208dc4ac21cbd15fd756ff">optimize</a> ()</td></tr>
<tr class="memdesc:a5ec0e705e6208dc4ac21cbd15fd756ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempts to optimize the branch.  <a href="#a5ec0e705e6208dc4ac21cbd15fd756ff">More...</a><br /></td></tr>
<tr class="separator:a5ec0e705e6208dc4ac21cbd15fd756ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1e9f378f77a8da5c2f75068df8f3c90"><td class="memTemplParams" colspan="2">template&lt;typename TYPE &gt; </td></tr>
<tr class="memitem:af1e9f378f77a8da5c2f75068df8f3c90"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#af1e9f378f77a8da5c2f75068df8f3c90">setValue</a> (size_t version, string key, const TYPE &amp;value)</td></tr>
<tr class="memdesc:af1e9f378f77a8da5c2f75068df8f3c90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets a value at the given version. If the version doesn't exist, a new layer will be created. Also creates a value stack if none exists.  <a href="#af1e9f378f77a8da5c2f75068df8f3c90">More...</a><br /></td></tr>
<tr class="separator:af1e9f378f77a8da5c2f75068df8f3c90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbb55b59474680677faafd7e53d03728"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#abbb55b59474680677faafd7e53d03728">truncate</a> (size_t topVersion)</td></tr>
<tr class="memdesc:abbb55b59474680677faafd7e53d03728"><td class="mdescLeft">&#160;</td><td class="mdescRight">Discards all layers and values with versions greater than or equal to the given version.  <a href="#abbb55b59474680677faafd7e53d03728">More...</a><br /></td></tr>
<tr class="separator:abbb55b59474680677faafd7e53d03728"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a9d4ca1df529076ecc2420da618f24fbf"><td class="memItemLeft" align="right" valign="top">set&lt; <a class="el" href="../../d6/d41/class_padamose_1_1_abstract_versioned_branch_client.html">AbstractVersionedBranchClient</a> *&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#a9d4ca1df529076ecc2420da618f24fbf">mClients</a></td></tr>
<tr class="memdesc:a9d4ca1df529076ecc2420da618f24fbf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set containing active clients. This is needed to calculate dependencies and to know when to optimize.  <a href="#a9d4ca1df529076ecc2420da618f24fbf">More...</a><br /></td></tr>
<tr class="separator:a9d4ca1df529076ecc2420da618f24fbf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add321fe7b87a9ebed11a59d7420c248c"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#add321fe7b87a9ebed11a59d7420c248c">mDirectReferenceCount</a></td></tr>
<tr class="memdesc:add321fe7b87a9ebed11a59d7420c248c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of clients holding direct references to branch internals. A nonzero direct reference count will prevent optimization of the branch.  <a href="#add321fe7b87a9ebed11a59d7420c248c">More...</a><br /></td></tr>
<tr class="separator:add321fe7b87a9ebed11a59d7420c248c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add9072b29c5b4f6f428c2f08999f45e6"><td class="memItemLeft" align="right" valign="top">map&lt; size_t, <a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#ab4c20029ae5f48d87bf41c1e49e2cebc">Layer</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#add9072b29c5b4f6f428c2f08999f45e6">mLayers</a></td></tr>
<tr class="memdesc:add9072b29c5b4f6f428c2f08999f45e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sparse array mapping versions onto layers. Each layer holds the set of keys corresponding to values that were set or modified in the version.  <a href="#add9072b29c5b4f6f428c2f08999f45e6">More...</a><br /></td></tr>
<tr class="separator:add9072b29c5b4f6f428c2f08999f45e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1578c0acf340debf7406f68063dd9c3"><td class="memItemLeft" align="right" valign="top">map&lt; string, unique_ptr&lt; <a class="el" href="../../d2/d67/class_padamose_1_1_abstract_value_stack.html">AbstractValueStack</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#ab1578c0acf340debf7406f68063dd9c3">mValueStacksByKey</a></td></tr>
<tr class="memdesc:ab1578c0acf340debf7406f68063dd9c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map of value stacks, indexed by key.  <a href="#ab1578c0acf340debf7406f68063dd9c3">More...</a><br /></td></tr>
<tr class="separator:ab1578c0acf340debf7406f68063dd9c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:ad2d90efb57ce1d6d3442d3b01abe7c78"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#ad2d90efb57ce1d6d3442d3b01abe7c78">AbstractVersionedBranchClient</a></td></tr>
<tr class="separator:ad2d90efb57ce1d6d3442d3b01abe7c78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cc4013865430c75cd75b8725372fb10"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#a1cc4013865430c75cd75b8725372fb10">AbstractVersionedValueIterator</a></td></tr>
<tr class="separator:a1cc4013865430c75cd75b8725372fb10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf03ee4f48ded4c5327f19d7e7df70dd"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#adf03ee4f48ded4c5327f19d7e7df70dd">VersionedStore</a></td></tr>
<tr class="separator:adf03ee4f48ded4c5327f19d7e7df70dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01e2f00133a6acd7e2675637b8e2c231"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#a01e2f00133a6acd7e2675637b8e2c231">VersionedStoreIterator</a></td></tr>
<tr class="separator:a01e2f00133a6acd7e2675637b8e2c231"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab33fe063bd5514b77c493e8a8e71e623"><td class="memItemLeft" align="right" valign="top">class&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#ab33fe063bd5514b77c493e8a8e71e623">VersionedStoreSnapshot</a></td></tr>
<tr class="separator:ab33fe063bd5514b77c493e8a8e71e623"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afae7059494f6f48f735123c1ab81a88c"><td class="memTemplParams" colspan="2">template&lt;typename &gt; </td></tr>
<tr class="memitem:afae7059494f6f48f735123c1ab81a88c"><td class="memTemplItemLeft" align="right" valign="top">class&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#afae7059494f6f48f735123c1ab81a88c">VersionedValue</a></td></tr>
<tr class="separator:afae7059494f6f48f735123c1ab81a88c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f398bf9c15eda5fea8ea77812ce8251"><td class="memTemplParams" colspan="2">template&lt;typename &gt; </td></tr>
<tr class="memitem:a1f398bf9c15eda5fea8ea77812ce8251"><td class="memTemplItemLeft" align="right" valign="top">class&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#a1f398bf9c15eda5fea8ea77812ce8251">VersionedValueIterator</a></td></tr>
<tr class="separator:a1f398bf9c15eda5fea8ea77812ce8251"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html" title="VersionedBranch is an internal data structure used to store a contiguous block of versioned values...">VersionedBranch</a> is an internal data structure used to store a contiguous block of versioned values. </p>
<p>Each branch is a sparse record of changes to the database over a span of versions. It contains a map of <a class="el" href="../../dd/d4c/class_padamose_1_1_value_stack.html" title="Templated implementation of AbstractValueStack. ">ValueStack</a> instances referenced by key. In addition, a sparse stack of version layers (implemented as a map of string sets) is used to quickly identify the keys of values modified in that layer.</p>
<p>The branch tracks a base version. Its "top" version is the highest version index in the layer stack. When a layer is removed, the keys of the values that were set in that layer are retrieved from the layer stack and used to erase the corresponding values from each value stack.</p>
<p>Any branch may have a parent branch. When searching for values, the tree will be searched recurively until a value is found. </p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="ab4c20029ae5f48d87bf41c1e49e2cebc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4c20029ae5f48d87bf41c1e49e2cebc">&#9670;&nbsp;</a></span>Layer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef set&lt; string &gt; <a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#ab4c20029ae5f48d87bf41c1e49e2cebc">Padamose::VersionedBranch::Layer</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a398735af7f249890be82ddb4b8d71560"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a398735af7f249890be82ddb4b8d71560">&#9670;&nbsp;</a></span>VersionedBranch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Padamose::VersionedBranch::VersionedBranch </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8223595abbec33103857f51e211f4014"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8223595abbec33103857f51e211f4014">&#9670;&nbsp;</a></span>~VersionedBranch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Padamose::VersionedBranch::~VersionedBranch </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Asserts that no direct references remain. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ab077cdebc43f1a0754986cc1711d045b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab077cdebc43f1a0754986cc1711d045b">&#9670;&nbsp;</a></span>AbstractVersionedStoreClient_canJoin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Padamose::VersionedBranch::AbstractVersionedStoreClient_canJoin </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">private</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implementation of virtual method. Always returns true. </p>
<dl class="section return"><dt>Returns</dt><dd>Always returns true. </dd></dl>

<p>Implements <a class="el" href="../../d6/d41/class_padamose_1_1_abstract_versioned_branch_client.html#a04a380b5a4a4a891ed77e1ebdc2a0491">Padamose::AbstractVersionedBranchClient</a>.</p>

</div>
</div>
<a id="ae8e10c5bac13b704dce04fef4b1cb971"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8e10c5bac13b704dce04fef4b1cb971">&#9670;&nbsp;</a></span>AbstractVersionedStoreClient_getJoinScore()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t Padamose::VersionedBranch::AbstractVersionedStoreClient_getJoinScore </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">private</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implementation of virtual method. Returns the top version. </p>
<dl class="section return"><dt>Returns</dt><dd>The top version. </dd></dl>

<p>Implements <a class="el" href="../../d6/d41/class_padamose_1_1_abstract_versioned_branch_client.html#a959d80f5c27e40d176bf60c272cbcf22">Padamose::AbstractVersionedBranchClient</a>.</p>

</div>
</div>
<a id="a6248cb0bfc0a9320893d0cfcd23ae762"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6248cb0bfc0a9320893d0cfcd23ae762">&#9670;&nbsp;</a></span>AbstractVersionedStoreClient_getVersionDependency()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t Padamose::VersionedBranch::AbstractVersionedStoreClient_getVersionDependency </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">private</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implementation of virtual method. Returns the base version; the branch depends on all versions less than the base version. </p>
<dl class="section return"><dt>Returns</dt><dd>The base version. </dd></dl>

<p>Implements <a class="el" href="../../d6/d41/class_padamose_1_1_abstract_versioned_branch_client.html#aa8d30b57c00c76ce141572b70329cf07">Padamose::AbstractVersionedBranchClient</a>.</p>

</div>
</div>
<a id="ab19ff3c4c3ebae051ff414c1f9cff4b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab19ff3c4c3ebae051ff414c1f9cff4b3">&#9670;&nbsp;</a></span>AbstractVersionedStoreClient_joinBranch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Padamose::VersionedBranch::AbstractVersionedStoreClient_joinBranch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html">VersionedBranch</a> &amp;&#160;</td>
          <td class="paramname"><em>branch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">private</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implementation of virtual method. Appends the contents of the branch onto the given branch and transfers all clients and children to the given branch. </p>
<p>The branch is optimized before being appended. Optimization may recursively trigger additional joins.</p>
<p>Neither branch is permitted to have direct references.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">branch</td><td>The branch to be appended to. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="../../d6/d41/class_padamose_1_1_abstract_versioned_branch_client.html#a25426ea65e90c4741487b34401e0e3b0">Padamose::AbstractVersionedBranchClient</a>.</p>

</div>
</div>
<a id="aaafb552decf0e49290e6f1f69e1a48b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaafb552decf0e49290e6f1f69e1a48b7">&#9670;&nbsp;</a></span>AbstractVersionedStoreClient_preventJoin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Padamose::VersionedBranch::AbstractVersionedStoreClient_preventJoin </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">private</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implementation of virtual method. Prevents a join optimization from happening if the branch has any direct references. </p>
<dl class="section return"><dt>Returns</dt><dd>True if the branch has any direct references. False otherwise. </dd></dl>

<p>Implements <a class="el" href="../../d6/d41/class_padamose_1_1_abstract_versioned_branch_client.html#ab4e1fde5c635d01ac32503b67b38ef4f">Padamose::AbstractVersionedBranchClient</a>.</p>

</div>
</div>
<a id="ad5f088510f8e8f3472326a08b1045552"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5f088510f8e8f3472326a08b1045552">&#9670;&nbsp;</a></span>canJoin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Padamose::AbstractVersionedBranchClient::canJoin </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns true if client supports the join operation. </p>
<dl class="section return"><dt>Returns</dt><dd>True if the join operation is supported (i.e. client is a branch). Otherwise false. </dd></dl>

</div>
</div>
<a id="a384adf6744324b6780aa5b0900c0c914"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a384adf6744324b6780aa5b0900c0c914">&#9670;&nbsp;</a></span>countDependencies()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t Padamose::VersionedBranch::countDependencies </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the total number of dependencies (i.e. clients). </p>
<dl class="section return"><dt>Returns</dt><dd>Total clients. </dd></dl>

</div>
</div>
<a id="a5961816289c0830f71645ceeaa2e9d4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5961816289c0830f71645ceeaa2e9d4d">&#9670;&nbsp;</a></span>eraseClient()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Padamose::VersionedBranch::eraseClient </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d41/class_padamose_1_1_abstract_versioned_branch_client.html">AbstractVersionedBranchClient</a> &amp;&#160;</td>
          <td class="paramname"><em>client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Removes the client from the branch's client set. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>Client to erase. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a64565cce4e0166aa8d97e5b17bc1a0d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64565cce4e0166aa8d97e5b17bc1a0d4">&#9670;&nbsp;</a></span>findImmutableTop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t Padamose::VersionedBranch::findImmutableTop </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/d41/class_padamose_1_1_abstract_versioned_branch_client.html">AbstractVersionedBranchClient</a> *&#160;</td>
          <td class="paramname"><em>ignore</em> = <code>NULL</code></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Iterates through all clients to find the top immutable version in the branch. All versions less than the top must not be changed. </p>
<p>The "immutable top" is the top of versions in the branch considered immutable. A version is immutable if a client depends on it.</p>
<p>The "ignore" parameter is provided to handle the case where a single client wishes to change the contents of a version. If the version only has the client as a dependent, then it is safe to change (without creating a new branch).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ignore</td><td>Client to ignore (or NULL). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The upper limit of immutable versions. </dd></dl>

</div>
</div>
<a id="a65d2ec2dac4dfe2870c66d52579807d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65d2ec2dac4dfe2870c66d52579807d5">&#9670;&nbsp;</a></span>findValueStack()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="../../d2/d67/class_padamose_1_1_abstract_value_stack.html">AbstractValueStack</a> * Padamose::VersionedBranch::findValueStack </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the <a class="el" href="../../dd/d4c/class_padamose_1_1_value_stack.html" title="Templated implementation of AbstractValueStack. ">ValueStack</a> corresponding to the given key, if it exists in the branch. Does not recurse: searches only the local branch. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>The key. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="../../dd/d4c/class_padamose_1_1_value_stack.html" title="Templated implementation of AbstractValueStack. ">ValueStack</a> for the key or NULL. </dd></dl>

</div>
</div>
<a id="aefcfa3a84d21e614228b1c390041c759"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefcfa3a84d21e614228b1c390041c759">&#9670;&nbsp;</a></span>fork()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">shared_ptr&lt; <a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html">VersionedBranch</a> &gt; Padamose::VersionedBranch::fork </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>baseVersion</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initializes a new branch using the given branch as a parent. If the base version is less than the top of the parent branch, then the corresponding layer is copied. </p>
<p>A parent branch must be provided. If the base version given is below the parent's immutable top (i.e. other clients or children depend on later versions) then all values set in that version must be copied into the child branch.</p>
<p>The given version must be greated than or equal to the base version of the parent branch. (We could iterate back through the list of branches if an earlier version is given, but for the use case of this constructor, that functionality isn't needed.)</p>
<p>There is a special case when a child branch is created with a base version of zero. Since there are no earlier versions, the parent branch's version may still be copied from, but no parent is set in the child. The child becomes a new root and thus has no parents.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parent</td><td>Parent branch. </td></tr>
    <tr><td class="paramname">baseVersion</td><td>Base version of the child branch. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a27a351eedec84aaa51ea41498116acc9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27a351eedec84aaa51ea41498116acc9">&#9670;&nbsp;</a></span>getJoinScore()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t Padamose::AbstractVersionedBranchClient::getJoinScore </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If a client supports the join operation, returns the score to use to select a winner from two valid candidates. </p>
<dl class="section return"><dt>Returns</dt><dd>The join score (i.e. the branch's top version). </dd></dl>

</div>
</div>
<a id="a93a3e84ba26aa417153c7a32c4612eb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93a3e84ba26aa417153c7a32c4612eb2">&#9670;&nbsp;</a></span>getRaw()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const void* Padamose::VersionedBranch::getRaw </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>typeID</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="afcacd0f30a882f72656758eb91f17e85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcacd0f30a882f72656758eb91f17e85">&#9670;&nbsp;</a></span>getTopVersion()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t Padamose::VersionedBranch::getTopVersion </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the top of the version stack or 0 if the stack is empty. </p>
<dl class="section return"><dt>Returns</dt><dd>The top of the version stack or 0 if the branch is empty. </dd></dl>

</div>
</div>
<a id="a4418f27da57b9c66732b6cbef4984357"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4418f27da57b9c66732b6cbef4984357">&#9670;&nbsp;</a></span>getValueOrNil()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename TYPE &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const TYPE* Padamose::VersionedBranch::getValueOrNil </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Recursively searches the branch to find the value for the key. The most recent version equal to or earlier will be returned. </p>
<p>A pointer to the value or NULL is returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">version</td><td>Search for this version of the most recent lesser version of the value; </td></tr>
    <tr><td class="paramname">key</td><td>The key. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A raw pointer to the value for the key or NULL. </dd></dl>

</div>
</div>
<a id="ab11d914b80c025e428d2e3e5da672747"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab11d914b80c025e428d2e3e5da672747">&#9670;&nbsp;</a></span>getVersionDependency()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t Padamose::AbstractVersionedBranchClient::getVersionDependency </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the version below which all verions are depended on (to not change) by client. If any version below the dependent verion is changed, the branch must be forked and the change applied to the new branch. </p>
<dl class="section return"><dt>Returns</dt><dd>The version below which no other version should be changed. </dd></dl>

</div>
</div>
<a id="a6977bbc67cacd6fe97d0a49e219b23d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6977bbc67cacd6fe97d0a49e219b23d5">&#9670;&nbsp;</a></span>insertClient()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Padamose::VersionedBranch::insertClient </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d41/class_padamose_1_1_abstract_versioned_branch_client.html">AbstractVersionedBranchClient</a> &amp;&#160;</td>
          <td class="paramname"><em>client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Inserts a client into the branch's client set. Inserting a client adds a dependency on a specific layer in the branch. </p>

</div>
</div>
<a id="a31d251e088e9918a2a6d344559ee539e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31d251e088e9918a2a6d344559ee539e">&#9670;&nbsp;</a></span>joinBranch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Padamose::AbstractVersionedBranchClient::joinBranch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html">VersionedBranch</a> &amp;&#160;</td>
          <td class="paramname"><em>branch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>If a client supports the join operation (i.e. client is a branch), appends the contents of the client to the given branch. </p>

</div>
</div>
<a id="a5ec0e705e6208dc4ac21cbd15fd756ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ec0e705e6208dc4ac21cbd15fd756ff">&#9670;&nbsp;</a></span>optimize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Padamose::VersionedBranch::optimize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Attempts to optimize the branch. </p>
<p>"Optimizing" a branch means two things: trim any unused versions from the top of the branch, and concatenate the longest child branch if the child branches from the top of the current branch.</p>
<p>Unused versions are simply those equal to or greatet than the "immutable top" version. The immutable top can fall below the top version following the removal of the top client. In this case, the branch can be truncated.</p>
<p>Following truncation, if there are child branches with their bases at the top pf the branch, one of those children may be joined to the branch. In this case, we select the longest child branch. When the child is joined to the parent, all of its clients must also be moved to the parent.</p>
<p>Optimization is performed recursively on any child branch selected to be be joined to the parent.</p>
<p>The presence of "direct references" will prevent the join optimization. A "direct reference" is a pointer to a branch internal, such as a value. As the join operation may invalidate internals, it must be prevented as long as direct references exist. This is accomplished using a reference count maintained by the <a class="el" href="../../df/d69/class_padamose_1_1_versioned_value.html" title="Lightweight handle intended to safely reference a value held in a versioned store. Useful for large values that would be cumbersome to copy. ">VersionedValue</a> object. </p>

</div>
</div>
<a id="a189402403b5278feb24366c8edf499ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a189402403b5278feb24366c8edf499ed">&#9670;&nbsp;</a></span>preventJoin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Padamose::AbstractVersionedBranchClient::preventJoin </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Used by client to prevent a join from happening. Only considered is <a class="el" href="../../d6/d41/class_padamose_1_1_abstract_versioned_branch_client.html#ad5f088510f8e8f3472326a08b1045552" title="Returns true if client supports the join operation. ">canJoin()</a> returns true. </p>
<dl class="section return"><dt>Returns</dt><dd>True if join should be prevented. </dd></dl>

</div>
</div>
<a id="a624e5cb9ba0bb6e4b0b1fcca8907a14f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a624e5cb9ba0bb6e4b0b1fcca8907a14f">&#9670;&nbsp;</a></span>setBranch() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Padamose::AbstractVersionedBranchClient::setBranch </td>
          <td>(</td>
          <td class="paramtype">shared_ptr&lt; <a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html">VersionedBranch</a> &gt;&#160;</td>
          <td class="paramname"><em>branch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove the client from the existing branch (if any) and add it to the new branch without changing the client's version. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">branch</td><td>The new branch for the snapshot. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af10c293db1a78375feeb4029ec8d35fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af10c293db1a78375feeb4029ec8d35fb">&#9670;&nbsp;</a></span>setBranch() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Padamose::AbstractVersionedBranchClient::setBranch </td>
          <td>(</td>
          <td class="paramtype">shared_ptr&lt; <a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html">VersionedBranch</a> &gt;&#160;</td>
          <td class="paramname"><em>branch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>version</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove the client from the existing branch (if any) and add it to the new branch. Update the client's version. </p>
<p>Branches internally maintain a set of their clients. This method updates the branch client sets correctly. Any version may be specified that is greater than the base version of the new branch. This will add a dependency on all lesser versions held in the branch.</p>
<p>When the snapshot is removed from its original, the original branch will be deleted or optimized. The original branch is only deleted if the snapshot was the last reference to it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">branch</td><td>The new branch for the snapshot. </td></tr>
    <tr><td class="paramname">version</td><td>The version referenced by the snapshot. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af1e9f378f77a8da5c2f75068df8f3c90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1e9f378f77a8da5c2f75068df8f3c90">&#9670;&nbsp;</a></span>setValue()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename TYPE &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Padamose::VersionedBranch::setValue </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>version</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const TYPE &amp;&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets a value at the given version. If the version doesn't exist, a new layer will be created. Also creates a value stack if none exists. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">version</td><td>The version to set the value at. Must be equal to or greater than the branch's base version. </td></tr>
    <tr><td class="paramname">key</td><td>Key of the value to set. </td></tr>
    <tr><td class="paramname">value</td><td>Raw pointer to value to set. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abbb55b59474680677faafd7e53d03728"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbb55b59474680677faafd7e53d03728">&#9670;&nbsp;</a></span>truncate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Padamose::VersionedBranch::truncate </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>topVersion</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Discards all layers and values with versions greater than or equal to the given version. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topVersion</td><td>Version for new "top" of branch. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="ad2d90efb57ce1d6d3442d3b01abe7c78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2d90efb57ce1d6d3442d3b01abe7c78">&#9670;&nbsp;</a></span>AbstractVersionedBranchClient</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="../../d6/d41/class_padamose_1_1_abstract_versioned_branch_client.html">AbstractVersionedBranchClient</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a1cc4013865430c75cd75b8725372fb10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cc4013865430c75cd75b8725372fb10">&#9670;&nbsp;</a></span>AbstractVersionedValueIterator</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class AbstractVersionedValueIterator</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="adf03ee4f48ded4c5327f19d7e7df70dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf03ee4f48ded4c5327f19d7e7df70dd">&#9670;&nbsp;</a></span>VersionedStore</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="../../d2/d73/class_padamose_1_1_versioned_store.html">VersionedStore</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a01e2f00133a6acd7e2675637b8e2c231"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01e2f00133a6acd7e2675637b8e2c231">&#9670;&nbsp;</a></span>VersionedStoreIterator</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="../../d9/d05/class_padamose_1_1_versioned_store_iterator.html">VersionedStoreIterator</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab33fe063bd5514b77c493e8a8e71e623"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab33fe063bd5514b77c493e8a8e71e623">&#9670;&nbsp;</a></span>VersionedStoreSnapshot</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="../../d3/d20/class_padamose_1_1_versioned_store_snapshot.html">VersionedStoreSnapshot</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="afae7059494f6f48f735123c1ab81a88c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afae7059494f6f48f735123c1ab81a88c">&#9670;&nbsp;</a></span>VersionedValue</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="../../df/d69/class_padamose_1_1_versioned_value.html">VersionedValue</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a1f398bf9c15eda5fea8ea77812ce8251"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f398bf9c15eda5fea8ea77812ce8251">&#9670;&nbsp;</a></span>VersionedValueIterator</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">friend class <a class="el" href="../../d8/ddf/class_padamose_1_1_versioned_value_iterator.html">VersionedValueIterator</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a9d4ca1df529076ecc2420da618f24fbf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d4ca1df529076ecc2420da618f24fbf">&#9670;&nbsp;</a></span>mClients</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">set&lt; <a class="el" href="../../d6/d41/class_padamose_1_1_abstract_versioned_branch_client.html">AbstractVersionedBranchClient</a>* &gt; Padamose::VersionedBranch::mClients</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set containing active clients. This is needed to calculate dependencies and to know when to optimize. </p>

</div>
</div>
<a id="add321fe7b87a9ebed11a59d7420c248c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add321fe7b87a9ebed11a59d7420c248c">&#9670;&nbsp;</a></span>mDirectReferenceCount</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t Padamose::VersionedBranch::mDirectReferenceCount</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The number of clients holding direct references to branch internals. A nonzero direct reference count will prevent optimization of the branch. </p>

</div>
</div>
<a id="add9072b29c5b4f6f428c2f08999f45e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add9072b29c5b4f6f428c2f08999f45e6">&#9670;&nbsp;</a></span>mLayers</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">map&lt; size_t, <a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html#ab4c20029ae5f48d87bf41c1e49e2cebc">Layer</a> &gt; Padamose::VersionedBranch::mLayers</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sparse array mapping versions onto layers. Each layer holds the set of keys corresponding to values that were set or modified in the version. </p>

</div>
</div>
<a id="a8420a0e79a7c70d074d4040bc9f182b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8420a0e79a7c70d074d4040bc9f182b2">&#9670;&nbsp;</a></span>mSourceBranch</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">shared_ptr&lt; <a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html">VersionedBranch</a> &gt; Padamose::AbstractVersionedBranchClient::mSourceBranch</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The source (or parent) branch for this client. May be NULL. </p>

</div>
</div>
<a id="ab1578c0acf340debf7406f68063dd9c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1578c0acf340debf7406f68063dd9c3">&#9670;&nbsp;</a></span>mValueStacksByKey</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">map&lt; string, unique_ptr &lt; <a class="el" href="../../d2/d67/class_padamose_1_1_abstract_value_stack.html">AbstractValueStack</a> &gt; &gt; Padamose::VersionedBranch::mValueStacksByKey</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Map of value stacks, indexed by key. </p>

</div>
</div>
<a id="a204e62db33566625f9bb2bf3abf9a77b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a204e62db33566625f9bb2bf3abf9a77b">&#9670;&nbsp;</a></span>mVersion</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t Padamose::AbstractVersionedBranchClient::mVersion</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The current (or base) version for this client. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/Users/travis/build/cryptogogue/padamose/src/padamose/<a class="el" href="../../dc/d7d/_versioned_branch_8h_source.html">VersionedBranch.h</a></li>
<li>/Users/travis/build/cryptogogue/padamose/src/padamose/<a class="el" href="../../da/d92/_versioned_branch_8cpp.html">VersionedBranch.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dc/d4f/namespace_padamose.html">Padamose</a></li><li class="navelem"><a class="el" href="../../d4/da9/class_padamose_1_1_versioned_branch.html">VersionedBranch</a></li>
    <li class="footer">Generated on Fri Sep 28 2018 21:24:37 for Padamose by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
